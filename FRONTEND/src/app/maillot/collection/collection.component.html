<app-header></app-header>

<section class="collection-wrapper">

  <!-- Titre -->
  <h1 class="section-title">Maillots</h1>

  <!-- Top-bar : filtres + actions -->
  <div class="topbar d-flex justify-content-between align-items-center flex-wrap mb-3">

    <!-- Filtres -->
    <ul class="filters nav flex-nowrap mb-2">
      <li class="nav-item" *ngFor="let f of filterList">
        <button
          class="btn pill"
          [class.active]="filter === f.key"
          (click)="filter = f.key"
        >
          {{ f.label }}
        </button>
      </li>
    </ul>

    <!-- Actions (grille / liste / filtre) -->
    <div class="view-actions btn-group mb-2">
      <button class="btn icon-btn"><i class="bi bi-grid-3x3-gap-fill"></i></button>
      <button class="btn icon-btn"><i class="bi bi-list"></i></button>
      <button class="btn icon-btn"><i class="bi bi-funnel"></i></button>
    </div>
  </div>

  <!-- Galerie de maillots -->
  <div class="row g-0 gallery" *ngIf="!loading && !error">
    <div
      class="col-12 col-sm-6 col-md-4 col-lg-3"
      *ngFor="let m of maillots"
      [hidden]="filter !== 'all' && !matchesFilter(m, filter)"
    >
      <figure class="product">
        <!-- <span class="badge bg-dark new-badge" *ngIf="m.isNew">NEW</span> -->

        <img
          [src]="m.url_image_maillot_1"
          [alt]="m.nom_maillot"
          class="w-100 product-img"
        />

        <figcaption class="pt-2">
          <h6 class="prod-title mb-1">{{ m.nom_maillot }}</h6>
          <p class="prod-price mb-0 fw-bold">
            {{ m.prix_ht_maillot | currency:'EUR':'symbol':'1.0-0' }}
          </p>
        </figcaption>
      </figure>
    </div>

    <!-- colonnes vides pour compléter à 4 -->
    <ng-container *ngIf="maillots.length % 4 !== 0">
      <div
        class="col-12 col-sm-6 col-md-4 col-lg-3 empty-col"
        *ngFor="let _ of [].constructor(4 - (maillots.length % 4))"
      ></div>
    </ng-container>
  </div>

  <!-- Loading / erreur -->
  <div *ngIf="loading" class="text-center py-5">
    <div class="spinner-border"></div>
  </div>
  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

</section>

<app-footer></app-footer>
